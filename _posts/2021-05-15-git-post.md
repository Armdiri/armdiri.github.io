---
title:  "깃 차근차근 알아가보자~"
description: ""
date: 2021-05-15 15:26:28 -0400
categories: TechBlog
toc: true
toc_sticky: true
toc_label: "Table of Contents"
sitemap:
    changefreq: daily
    priority: 1.0
header:
    teaser:
tags:
- git
---

깃을 접하고 사용한지가 오래 되었는데 많은 블러그에 문서가 많이 있고 그걸 토대로 잘 이용했다고 생각했습니다. 
잘 이용하고 있긴 한데 주로 사용하는 내용이 정리가 잘되면 후임또는 인수인계시에 추가되는 리소스를 좀 줄여줄수 있지 않을가해서 
작성을 해보기로 했습니다. 

## 브랜치 정책
일반적인 브랜치 정책이 아닌 제가 주로 쓰는 정책인데 인프라 환경에 따라 달리 가게 된다.

* master : 마지막 메이저 버전 v1.0.0
* release : 운영서버에 해당 v1.1.1
* alpha : 알파 테스트 브랜치
* develop : 개발테스트 브랜치
* feature : 기능단위 브랜치 v1.1.0
* hot fixes : 유지보수 브랜치 v1.0.1

## 정석적인 커밋 방법
#### 작업순서
* 개발자는 지라를 통해 기획자가 만든 이슈를 본인의 업무로 할당
* 개발자는 업무 확인
* 브랜치 네이밍을 참고하고 최종본에서 브랜치를 생성

#### 1. 브랜치 생성
```vim
-- 현재 운영에 반영되어 있는 브랜치를 가져옵니다.
-- 아래 명령어를 이용하면 새로운 명칭의 브랜치를 새로 생성과 동시에 브랜치 이동이 가능합니다
git checkout -b feature/xxx origin/release
git checkout -b hotfixes/xxx origin/release
```

#### 2. 커밋
```vim
-- 작업한 소스를 git staging에 add합니다. (개별, 전체)
git add 파일경로/파일명(확장자 기입) => 개별
git add .(dot) => 전체
git add 파일경로/* => 일괄적용
  
-- 권장하는 방식 (옵션을 권장하는 이유는 staging에 올라갈때 변경된 소스를 체크하여 add여부를 결정할 수 있습니다.)
git add -p <파일>

-- 작업한 소스를 commit 합니다. ( -m 옵션이 없을 경우 commit 메세지 작성할 수 있는 vi창 생성됨 )
git commit -m "메세지"
-- 추가적으로 위 add 권장방식과 동일한 방식으로 commit 가능
git commit -v
```
* push 없이 여러번 commit 하고 싶은 경우 add와 commit을 반복해서 사용해주면 됩니다. (또는 commit 없이 다른 브랜치로 이동하고 싶다면  => git stash(임시저장) 명령어를 사용합니다. )

#### 3. 커밋메세지
깃 커밋시에 해당 메세지를 남기고 Push/Pull Request 시 적용, PR 메세지는 아무거나 해도 상관없습니다
```vim
첫줄엔 작업의 내역

[JIRA 와 연동시]
JRA-34 #comment 배포전이니깐 건들지 마라
JRA-34 #time 1w 2d 4h 30m 이슈해결
JRA-34 #qa
```
* 협업툴과 연동된 작업시 이슈에 모든 내용이 담겨 있어서 따로 메세지를 작성하지 않아도 된다. 다만 협업툴이 없는 작업시엔 상세하게 내용을 기입해야 한다.

#### 4. develop 브랜치로 반영
```vim
1. 작업 branch를 develop branch로 pull request
github에서 new pull reqeust하여 작업 소스를 확인한 후 develop으로 pull request합니다.
장점
- 작업한 소스를 시각적으로 보기 편함
- 충돌이 발생했을 경우 대처가 쉬움
단점
- 매번 github 홈페이지를 통해 pull request하기 때문에 시간비용이 큼
- 작업 branch를 remote에 push하여 원격 브랜치가 많아져 복잡해질 수 있음
  
-- git push origin feature/xxx
  
  
2. develop branch를 local repository로 내려받아 merge한 후 test진행
장점
- local repository에서 merge에 대한 test를 진행하기 때문에 충돌이 발생해도 대처가 가능
단점
- 로컬에 주요 branch가 생성되서 실수로 잘못 push를 할 수 있는 상황이 발생할 수 있음.
  
-- remote develop 브랜치를 local로 내려받습니다.
git checkout develop
git pull origin develop
  
-- local develop branch에 작업 branch를 merge 합니다.
git merge feature/xxx
  
-- local develop 브랜치 push (테스트 및 충돌여부 확인 후)
git push origin develop
  
-- local develop branch 삭제
git branch -d develop
```